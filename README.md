# PatientDrProblem
You will code an urgent care center simulation. The urgent care provides two services, diagnosis by a doctor and lab work. Each department provides its own waiting room where patients can wait for their turn. There are a fixed number of chairs for waiting patients. If no chairs are left in the assigned waiting room, the patient will leave without being seen. There is one doctor and one lab tech. If no patients are waiting in the doctor’s waiting room, the doctor goes to sleep. If no patients are waiting in the lab tech’s waiting room, the lab tech goes to sleep. The appearance of a patient in either waiting room will wake up the corresponding lab tech. Threads: -­‐ Main thread o Reads the job card for the simulation parameters o Creates the doctor and lab tech threads o Reads the patient data from job card and generates the patient threads -­‐ Doctor thread o Will see each patient in the doctor’s waiting room in order of arrival. If no patients are in the doctor’s waiting room, the doctor thread should go to sleep until a patient arrives. The duration of the consultation is indicated on the patient record (obtained from the patient data file) -­‐ Lab tech thread o Will see each patient in the lab tech’s waiting room in order of arrival. If no patients are in the lab tech’s waiting room, the lab tech thread should go to sleep until a patient arrives. The duration of the lab work is indicated on the patient record (obtained from the patient data file) -­‐ Patient threads o If there is a space in the doctor’s waiting room, the patient should wait in the waiting room until the doctor is ready to see them o If there is no space in the doctor’s waiting room, the patient will leave without being seen. o Once the doctor has seen the patient, if lab work is needed, the patient will wait in the lab tech’s waiting room. All patients that need lab work will wait for the lab tech to process them. The waiting room will accommodate as many patients as needed (they can stand ;-­‐ ) ) o Once a patient is finished (no lab work or lab work completed), the patient leaves the urgent care center. Project parameters -­‐ Must use threads appropriately and as specified in the assignment -­‐ Programs should be coded in C language (C99 standard) and will be compiled and tested on bama.ua.edu. If you choose to program on another system, give yourself enough time verify it works on bama. No other system will be used to test your code. -­‐ You should use the pthreads library for threading. You can use mutexes or condition variables from the pthreads library and/or semaphores from the posix library. -­‐ All data items shared by the threads should be appropriately protected -­‐ Appropriate data structures should be selected based on your knowledge of data structures (CS360, etc). -­‐ Algorithms should be efficient and appropriate. This program should demonstrate not only your understanding of process synchronization but your ability to design a program appropriately -­‐ The solution must address 1) mutual exclusion, 2) progress and 3) bounded waiting -­‐ The only sleeps allowed are in the main thread to create the appropriate separation in the creation of the patient threads -­‐ Reading and processing of the jobcard (and associated thread creation does not have to be in a function; it can be in the main function) Input data file: To facilitate testing, input will be generated via a jobcard. The job card will consist of parameters that are used to govern the running of the project. Jobcard will use comma-­‐separated values where appropriate. The file name of the jobcard should be hardcoded as jobcard. You can assume that the jobcard entries are formatted correctly and the cases are represented below. Items in the jobcard: -­‐ List the number of waiting spaces (line 1 below; always line 1) in the doctor’s waiting room -­‐ List each arriving patient includes name, arrival offset (in seconds), doctor consultation time and lab tech working duration. If the lab tech duration is 0, then there is no lab work required and the patient can leave after the doctor’s consultation -­‐ You can choose the contents of the jobcard for testing so that you exercise your program and you are certain that it works -­‐ I will set up my own jobcard to exercise your code and compare the output -­‐ You can assume that the arrival time are in sequence and represent increasingly larger offsets. You should sleep for the difference between the offset in the next record minus the offset of the current record. For example, between John and Suzy, sleep for 2 (2-­‐0). Between James and Beth, sleep 3 (5-­‐2). bash-­‐2.05$ cat jobcard 6,waiting_spaces Jenny,0,5,0 John,0,5,2 Suzy,2,5,5 James,2,10,0 Beth,5,2,1 Output Print out the following output for events from the car thread: Patient Janet leaves; No waiting spaces Patient Janet - (MA) arrival Patient Janet - (MZ) leaves busy urgent care center Patient LaToya gets the doctor and lab tech without waiting Patient LaToya - (MA) arrival Patient LaToya - (MC) is being seen by the doctor for 1 second(s) Patient LaToya - (MD) is done with doctor Patient LaToya - (MCL) is being serviced by the lab tech for 2 second(s) Patient LaToya - (ML) is done with lab tech Patient LaToya - (ME) is leaving center Patient Michael gets the doctor without waiting; no lab work Patient Michael - (MA) arrival Patient Michael - (MC) is being seen by the doctor for 1 second(s) Patient Michael - (MD) is done with doctor Patient Michael - (ME) is leaving center Patient Jermaine waits for doctor with others waiting Patient Jermaine - (MA) arrival Patient Jermaine - (MB1) is waiting for doctor Patient Jermaine - (MB2) is no longer waiting for doctor; signaled by &lt;name> Patient Jermaine - (MC) is being seen by the doctor for 1 second(s) Patient Jermaine - (MC1) notifying patient &lt;name> that they are next for doctor Patient Jermaine - (MD) is done with doctor &lt;if lab work, see additional lines below> Patient Jermaine - (ME) is leaving center Patient Tito gets the doctor without waiting but other waiting when consultation is complete Patient Tito - (MA) arrival Patient Tito - (MC) is being seen by the doctor for 1 second(s) Patient Tito - (MC1) notifying patient &lt;name> that they are next for doctor Patient Tito - (MD) is done with doctor &lt;if lab work, see additional lines below> Patient Tito - (ME) is leaving center Patient Marlon waits for pump; no patients waiting when consultation is done Patient Marlon - (MA) arrival Patient Marlon - (MB1) is waiting for doctor Patient Marlon - (MB2) is no longer waiting for doctor; signaled by &lt;name> Patient Marlon - (MC) is being seen by the doctor for 1 second(s) Patient Marlon - (MD) is done with doctor &lt;if lab work, see additional lines below> Patient Marlon - (ME) is leaving center Additional lines for lab work needed. If waits to get lab tech and others waiting when done insert &lt;WAIT_ALL> If gets lab tech without waiting but others are waiting when done insert &lt;WAIT_OTHERS> If waits for lab tech but no one waiting when done insert &lt;WAIT_ALONE> WAIT_ALL Patient Randy - (MBL1) is waiting for lab tech Patient Randy - (MBL2) is no longer waiting lab tech; signaled by &lt;name> Patient Randy - (MCL) is being serviced by the lab tech for 1 second(s) Patient Randy - (MCL1) notifying patient &lt;name> that they are next for lab tech Patient Randy - (ML) is done with lab tech WAIT_OTHERS Patient Rebbie - (MCL) is being serviced by the lab tech for 1 second(s) Patient Rebbie - (MCL1) notifying patient &lt;name> that they are next for lab tech Patient Rebbie - (ML) is done with lab tech WAIT_ALONE Patient Katherine - (MBL1) is waiting for lab tech Patient Katherine - (MBL2) is no longer waiting for lab tech; signaled by &lt;name> Patient Katherine - (MCL) is being serviced by the lab tech for 1 second(s) Patient Katherine - (ML) is done with lab tech 13 message types Patient %s - (MA) arrival //at beginning of patient thread Patient %s - (MB1) is waiting for doctor1 Patient %s - (MB2) is no longer waiting for doctor; signaled by &lt;name>2 Patient %s - (MC) is being seen by the doctor for &lt;n> second(s)3 Patient %s - (MC1) notifying patient &lt;name> that they are next for doctor4 Patient %s - (MD) is done with doctor Patient %s - (MBL1) is waiting for lab tech 5 Patient %s - (MBL2) is no longer waiting for lab tech; signaled by &lt;name6 Patient %s - (MCL) is being serviced by the lab tech for &lt;n> second(s)7 Patient %s - (MCL1) notifying patient &lt;name> that they are next for lab tech8 Patient %s - (ML) is done with lab tech Patient %s - (ME) is leaving center Patient %s - (MZ) leaves busy urgent care center 1 Before thread blocks 2 When thread wakes up 3 When thread is assigned the doctor before the sleep for appointment duration 4 When a thread signals a waiting patient after relinquishing the doctor 5 When thread blocks 6 When thread wakes up 7 When thread is assigned the lab tech before the sleep for appointment duration 8 When a thread signals a waiting patient after relinquishing the lab tech
